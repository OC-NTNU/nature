# This is the default configuration file that is part of the git repos.
# Instead of changing this file, override the defaults by passing your local
# configuration file using the -c/--config command line option. E.g.
# ./make_abstracts.py -c nature-corpus.ini -c local.ini run-all

#=============================================================================
[DEFAULT]
#=============================================================================

base_dir = .

log_level = INFO

#-----------------------------------------------------------------------------
# terms
#-----------------------------------------------------------------------------
terms.csv_file = checked_terms.csv
terms.results_file = %(base_dir)s/terms.txt
terms.max_n =

#-----------------------------------------------------------------------------
# search
#-----------------------------------------------------------------------------
search.results_file = %(base_dir)s/search_results.pkl
search.records_dir = %(base_dir)s/records
search.terms_file = %(terms.results_file)s
search.max_n_records = 5000
search.resume = false

#-----------------------------------------------------------------------------
# html
#-----------------------------------------------------------------------------
html.search_results_file = %(search.results_file)s
html.records_dir = %(search.records_dir)s
html.results_file = %(base_dir)s/search_results.html
html.max_n_records = 5000

#-----------------------------------------------------------------------------
# tools
#-----------------------------------------------------------------------------

home_dir = /users/work

python2 = python2
nxml2txt = ./nxml2txt_py2

corenlp_home = %(home_dir)s/local/src/corenlp
corenlp_ver = 3.5.1
corenlp_memory = 6g
corenlp_threads = 1
corenlp_resume = false

baleen_java_home = %(home_dir)s/projects/ocean-certain/code/java/baleen-java
extract_vars_exec = %(baleen_java_home)s/bin/extract-vars
prune_vars_exec = %(baleen_java_home)s/bin/prune-vars

neo4j_edition = community
neo4j_version = 2.3.2
neo4j_username = neo4j
neo4j_password = nature


#=============================================================================
[ABSTRACTS]
#=============================================================================

abs_base_dir = %(base_dir)s/abs

neobox_home = %(abs_base_dir)s/neobox
neobox_name = nature_abs
neobox_username = %(neo4j_username)s
neobox_password = %(neo4j_password)s

#-----------------------------------------------------------------------------
# extract
#-----------------------------------------------------------------------------
extract.results_file = %(search.results_file)s
extract.records_dir = %(search.records_dir)s
extract.xml_dir = %(abs_base_dir)s/xml
extract.match_min_n = 3
extract.abs_max_n =

#-----------------------------------------------------------------------------
# soa
#-----------------------------------------------------------------------------
soa.python2 = %(python2)s
soa.nxml2txt = %(nxml2txt)s
soa.xml_dir = %(extract.xml_dir)s
soa.soa_dir = %(abs_base_dir)s/soa
soa.resume = false

#-----------------------------------------------------------------------------
# split
#-----------------------------------------------------------------------------
split.soa_dir = %(soa.soa_dir)s
split.sent_dir = %(abs_base_dir)s/sent
split.tmp_dir =
split.corenlp_home = %(corenlp_home)s
split.corenlp_ver = %(corenlp_ver)s

#-----------------------------------------------------------------------------
# parse
#-----------------------------------------------------------------------------
parse.sent_dir = %(split.sent_dir)s
parse.scnlp_dir = %(abs_base_dir)s/scnlp
parse.corenlp_home = %(corenlp_home)s
parse.corenlp_ver = %(corenlp_ver)s

#-----------------------------------------------------------------------------
# trees
#-----------------------------------------------------------------------------
trees.scnlp_dir = %(parse.scnlp_dir)s
trees.word_parse_dir = %(abs_base_dir)s/wordparse
trees.lemma_parse_dir = %(abs_base_dir)s/lemmaparse

#-----------------------------------------------------------------------------
# vars
#-----------------------------------------------------------------------------
extvars.extract_vars_exec = %(extract_vars_exec)s
extvars.trees_dir = %(trees.lemma_parse_dir)s
extvars.vars_file = %(abs_base_dir)s/vars/nature_abs_vars.json

#-----------------------------------------------------------------------------
# prune
#-----------------------------------------------------------------------------
prunevars.prune_vars_exec = %(prune_vars_exec)s
prunevars.vars_file = %(extvars.vars_file)s
prunevars.pruned_file = %(abs_base_dir)s/vars/nature_abs_vars_pruned.json
prunevars.options = --unique

#-----------------------------------------------------------------------------
# offsets
#-----------------------------------------------------------------------------
# TODO: use pruned file
offsets.in_vars_file = %(extvars.vars_file)s
offsets.scnlp_dir = %(parse.scnlp_dir)s
offsets.out_vars_file = %(abs_base_dir)s/vars/nature_abs_vars_offset.json


#-----------------------------------------------------------------------------
# tocsv
#-----------------------------------------------------------------------------
tocsv.vars_file = %(offsets.out_vars_file)s
tocsv.scnlp_dir = %(parse.scnlp_dir)s
tocsv.sent_dir = %(split.sent_dir)s
# FIXME: is bibtex step obligatory?
tocsv.bib_dir = %(bibtex.bib_dir)s
tocsv.nodes_dir = %(abs_base_dir)s/csv/nodes
tocsv.relations_dir = %(abs_base_dir)s/csv/relations

#-----------------------------------------------------------------------------
# toneo
#-----------------------------------------------------------------------------
toneo.neobox_home = %(neobox_home)s
toneo.neobox_name = %(neobox_name)s
toneo.nodes_dir = %(tocsv.nodes_dir)s
toneo.relations_dir = %(tocsv.relations_dir)s
toneo.options =

#-----------------------------------------------------------------------------
# ppgraph
#-----------------------------------------------------------------------------
ppgraph.neobox_home = %(neobox_home)s
ppgraph.neobox_name = %(neobox_name)s
ppgraph.neobox_username = %(neobox_username)s
ppgraph.neobox_password = %(neobox_password)s

#-----------------------------------------------------------------------------
# brat
#-----------------------------------------------------------------------------
brat.results_file = %(extract.results_file)s
brat.sent_dir = %(split.sent_dir)s
brat.brat_dir = %(abs_base_dir)s/brat
brat.brat_rank_dir = %(abs_base_dir)s/rank

#-----------------------------------------------------------------------------
# bibtex
#-----------------------------------------------------------------------------
bibtex.xml_dir = %(extract.xml_dir)s
bibtex.bib_dir = %(base_dir)s/bib

#-----------------------------------------------------------------------------
# vertical
#-----------------------------------------------------------------------------
vertical.scnlp_dir = %(parse.scnlp_dir)s
vertical.records_dir = %(search.records_dir)s
vertical.vert_dir = %(abs_base_dir)s/vert

#-----------------------------------------------------------------------------
# setup-neo4j
#-----------------------------------------------------------------------------
setup_neo4j.neobox_home = %(neobox_home)s
setup_neo4j.box_name = %(neobox_name)s
setup_neo4j.edition = %(neo4j_edition)s
setup_neo4j.version = %(neo4j_version)s
setup_neo4j.password = %(neobox_password)s


#-----------------------------------------------------------------------------
# startserver
#-----------------------------------------------------------------------------
startserver.neobox_home = %(neobox_home)s
startserver.box_name = %(neobox_name)s

#-----------------------------------------------------------------------------
# stopserver
#-----------------------------------------------------------------------------
stopserver.neobox_home = %(neobox_home)s
stopserver.box_name = %(neobox_name)s

#=============================================================================
[FULL]
#=============================================================================

full_base_dir = %(base_dir)s/full

#-----------------------------------------------------------------------------
# download
#-----------------------------------------------------------------------------
download.results_file = %(search.results_file)s
download.htm_dir = %(full_base_dir)s/htm
download.max_n_htm = 10000
download.htm_resume = false
download.htm_cache_dir =

#-----------------------------------------------------------------------------
# extract
#-----------------------------------------------------------------------------
extract.htm_dir = %(download.htm_dir)s
extract.xml_dir = %(full_base_dir)s/xml

#-----------------------------------------------------------------------------
# soa
#-----------------------------------------------------------------------------
soa.nxml2txt = %(nxml2txt)s
soa.xml_dir = %(extract.xml_dir)s
soa.soa_dir = %(full_base_dir)s/soa

#-----------------------------------------------------------------------------
# parse
#-----------------------------------------------------------------------------
parse.soa_dir = %(soa.soa_dir)s
parse.scnlp_dir = %(full_base_dir)s/scnlp
parse.corenlp_home = %(corenlp_home)s
parse.corenlp_ver = %(corenlp_ver)s
parse.memory = %(corenlp_memory)s
parse.threads = %(corenlp_threads)s
parse.resume = %(corenlp_resume)s

#-----------------------------------------------------------------------------
# trees
#-----------------------------------------------------------------------------
trees.scnlp_dir = %(parse.scnlp_dir)s
trees.word_parse_dir = %(full_base_dir)s/wordparse
trees.lemma_parse_dir = %(full_base_dir)s/lemmaparse

#-----------------------------------------------------------------------------
# vars
#-----------------------------------------------------------------------------
extvars.extract_vars_exec = %(extract_vars_exec)s
extvars.trees_dir = %(trees.lemma_parse_dir)s
extvars.vars_file = %(full_base_dir)s/vars/nature_full_vars.json

#-----------------------------------------------------------------------------
# prune
#-----------------------------------------------------------------------------
prunevars.prune_vars_exec = %(prune_vars_exec)s
prunevars.vars_file = %(extvars.vars_file)s
prunevars.pruned_file = %(full_base_dir)s/vars/nature_full_vars_pruned.json
prunevars.options = --unique

#-----------------------------------------------------------------------------
# vertical
#-----------------------------------------------------------------------------
vertical.scnlp_dir = %(parse.scnlp_dir)s
vertical.records_dir = %(search.records_dir)s
vertical.vert_dir = %(full_base_dir)s/vert
